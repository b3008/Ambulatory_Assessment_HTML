!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=6)}([function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),window.html=function(e,...t){let s=e[0];for(let n=0;n<t.length;n++)s+=t[n],s+=e[n+1];return s};class n extends HTMLElement{constructor(){super(),this._props=this.makePropertiesFromAttributes()}connectedCallback(){this._attachedTimestamp=(new Date).getTime()}makePropertiesFromAttributes(){let e=customElements.get(this.tagName.toLowerCase()).observedAttributes;if(!e)return null;let t={};for(let s=0;s<e.length;s++){let n=this.toCamelCase(e[s]);t[n]=e[s],void 0===this[n]&&Object.defineProperty(this,n,{get:()=>{let t=this.getAttribute(e[s]);return"true"===t||"false"!==t&&t},set:t=>{this.setAttribute(e[s],t)}})}return t}toCamelCase(e){let t=e.split("-"),s=t[0];for(let e=1;e<t.length;e++)s+=t[e][0].toUpperCase()+t[e].substr(1);return s}toHyphenated(e){let t="";for(let s=0;s<e.length;s++){let n=e[s];n.toLowerCase()!==n?t+=`-${n.toLowerCase()}`:t+=n}return t}_analyzeChildNodesForElement(e){if(this._isAAElement(e))this._replaceElementWithHolder(e);else for(let t=0;t<e.childNodes.length;t++)this._isAAElement(e.childNodes[t])?this._replaceElementWithHolder(e.childNodes[t]):this._analyzeChildNodesForElement(e.childNodes[t])}_isAAElement(e){return-1!=AANodeNames.indexOf(e.nodeName)}_isHolder(e){return"AA-HOLDER"==e.tagName}_restoreHeldNodes(e){let t=e.childNodes;for(let e=0;e<t.length;e++){let s=t[e];this._isHolder(s)?this._replaceHolderWithElement(s):s.childNodes.length>0&&this._restoreHeldNodes(s)}}_replaceElementWithHolder(e){let t=document.createElement("aa-holder");return t.id=e.getAttribute("name")+"-holder",t.heldElementOuterHTML=e.outerHTML,t.heldElement=e.cloneNode(!1),t.heldElement.innerFragment=this._createFragmentForElement(e),e.replaceWith(t),t}_replaceHolderWithElement(e){return e.replaceWith(e.heldElement),e.heldElement}_createFragmentForElement(e){let t=document.createDocumentFragment(),s=[];for(let t=0;t<e.childNodes.length;t++)s.push(e.childNodes[t]);for(let e=0;e<s.length;e++)t.appendChild(s[e]);return t}_dispatchDebugEvent(e){this._debug&&this.dispatchEvent(new CustomEvent("debug",{detail:e,bubbles:!0}))}_dispatchAssignableEnd(){let e=new CustomEvent("assignableEnd",{bubbles:!0});this.dispatchEvent(e)}_getParentSession(){let e=this;for(;null!=e&&"AA-SESSION"!=e.nodeName;)e=e.parentNode;return e}}customElements.get("aa-base-element")||(void 0===window.AANodeNames&&(window.AANodeNames=[]),window.AANodeNames.push("AA-BASE-ELEMENT"),customElements.define("aa-base-element",n))},function(e,t,s){"use strict";(function(e){t.a=function(t){var s=function(e,t){var s=new Error(e+" at character "+t);throw s.index=t,s.description=e,s},n={"-":!0,"!":!0,"~":!0,"+":!0},i={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},r=function(e){var t,s=0;for(var n in e)(t=n.length)>s&&e.hasOwnProperty(n)&&(s=t);return s},o=r(n),a=r(i),l={true:!0,false:!1,null:null},d=function(e){return i[e]||0},h=function(e,t,s){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:s}},u=function(e){return e>=48&&e<=57},c=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!i[String.fromCharCode(e)]},m=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!i[String.fromCharCode(e)]},p=function(e){for(var t,r,p=0,f=e.charAt,g=e.charCodeAt,E=function(t){return f.call(e,t)},b=function(t){return g.call(e,t)},_=e.length,v=function(){for(var e=b(p);32===e||9===e||10===e||13===e;)e=b(++p)},y=function(){var e,t,n=A();return v(),63!==b(p)?n:(p++,(e=y())||s("Expected expression",p),v(),58===b(p)?(p++,(t=y())||s("Expected expression",p),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void s("Expected :",p))},N=function(){v();for(var t=e.substr(p,a),s=t.length;s>0;){if(i.hasOwnProperty(t)&&(!c(b(p))||p+t.length<e.length&&!m(b(p+t.length))))return p+=s,t;t=t.substr(0,--s)}return!1},A=function(){var e,t,n,i,r,o,a,l;if(o=C(),!(t=N()))return o;for(r={value:t,prec:d(t)},(a=C())||s("Expected expression after "+t,p),i=[o,r,a];(t=N())&&0!==(n=d(t));){for(r={value:t,prec:n};i.length>2&&n<=i[i.length-2].prec;)a=i.pop(),t=i.pop().value,o=i.pop(),e=h(t,o,a),i.push(e);(e=C())||s("Expected expression after "+t,p),i.push(r,e)}for(e=i[l=i.length-1];l>1;)e=h(i[l-1].value,i[l-2],e),l-=2;return e},C=function(){var t,s,i;if(v(),t=b(p),u(t)||46===t)return w();if(39===t||34===t)return x();if(91===t)return H();for(i=(s=e.substr(p,o)).length;i>0;){if(n.hasOwnProperty(s)&&(!c(b(p))||p+s.length<e.length&&!m(b(p+s.length))))return p+=i,{type:"UnaryExpression",operator:s,argument:C(),prefix:!0};s=s.substr(0,--i)}return!(!c(t)&&40!==t)&&O()},w=function(){for(var e,t,n="";u(b(p));)n+=E(p++);if(46===b(p))for(n+=E(p++);u(b(p));)n+=E(p++);if("e"===(e=E(p))||"E"===e){for(n+=E(p++),"+"!==(e=E(p))&&"-"!==e||(n+=E(p++));u(b(p));)n+=E(p++);u(b(p-1))||s("Expected exponent ("+n+E(p)+")",p)}return t=b(p),c(t)?s("Variable names cannot start with a number ("+n+E(p)+")",p):46===t&&s("Unexpected period",p),{type:"Literal",value:parseFloat(n),raw:n}},x=function(){for(var e,t="",n=E(p++),i=!1;p<_;){if((e=E(p++))===n){i=!0;break}if("\\"===e)switch(e=E(p++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return i||s('Unclosed quote after "'+t+'"',p),{type:"Literal",value:t,raw:n+t+n}},T=function(){var t,n=b(p),i=p;for(c(n)?p++:s("Unexpected "+E(p),p);p<_&&(n=b(p),m(n));)p++;return t=e.slice(i,p),l.hasOwnProperty(t)?{type:"Literal",value:l[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},L=function(e){for(var t,n,i=[],r=!1;p<_;){if(v(),(t=b(p))===e){r=!0,p++;break}44===t?p++:((n=y())&&"Compound"!==n.type||s("Expected comma",p),i.push(n))}return r||s("Expected "+String.fromCharCode(e),p),i},O=function(){var e,t;for(t=40===(e=b(p))?F():T(),v(),e=b(p);46===e||91===e||40===e;)p++,46===e?(v(),t={type:"MemberExpression",computed:!1,object:t,property:T()}):91===e?(t={type:"MemberExpression",computed:!0,object:t,property:y()},v(),93!==(e=b(p))&&s("Unclosed [",p),p++):40===e&&(t={type:"CallExpression",arguments:L(41),callee:t}),v(),e=b(p);return t},F=function(){p++;var e=y();if(v(),41===b(p))return p++,e;s("Unclosed (",p)},H=function(){return p++,{type:"ArrayExpression",elements:L(93)}},P=[];p<_;)59===(t=b(p))||44===t?p++:(r=y())?P.push(r):p<_&&s('Unexpected "'+E(p)+'"',p);return 1===P.length?P[0]:{type:"Compound",body:P}};if(p.version="0.3.4",p.toString=function(){return"JavaScript Expression Parser (JSEP) v"+p.version},p.addUnaryOp=function(e){return o=Math.max(e.length,o),n[e]=!0,this},p.addBinaryOp=function(e,t){return a=Math.max(e.length,a),i[e]=t,this},p.addLiteral=function(e,t){return l[e]=t,this},p.removeUnaryOp=function(e){return delete n[e],e.length===o&&(o=r(n)),this},p.removeAllUnaryOps=function(){return n={},o=0,this},p.removeBinaryOp=function(e){return delete i[e],e.length===a&&(a=r(i)),this},p.removeAllBinaryOps=function(){return i={},a=0,this},p.removeLiteral=function(e){return delete l[e],this},p.removeAllLiterals=function(){return l={},this},"undefined"==typeof exports){if(!t)return p;var f=t.jsep;t.jsep=p,p.noConflict=function(){return t.jsep===p&&(t.jsep=f),p}}else e.exports?exports=e.exports=p:exports.parse=p}(void 0)}).call(this,s(5)(e))},function(module,__webpack_exports__,__webpack_require__){"use strict";var _aa_baseElement_baseElement_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_aa_when_aa_when_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_aa_otherwise_aa_otherwise_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_lib_jsep_jsep_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1);class AAChoose extends _aa_baseElement_baseElement_js__WEBPACK_IMPORTED_MODULE_0__.a{static get observedAttributes(){return["name","should-run","debug"]}constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML="<slot></slot>"}connectedCallback(){if(this._shouldRun=null===this.shouldRun||!0===this.shouldRun,this.sessionElement=this._getParentSession(),this.sessionElement&&this.sessionElement.mem&&(this.mem=this.sessionElement.mem),!this.started&&this._shouldRun)if(void 0!==this.innerFragment){this._analyzeChildNodesForElement(this.innerFragment);var e=this._getNodeToInstantiate();if(0==e.length)this._dispatchAssignableEnd();else for(var t=0;t<e.length;t++){var s=e[t];void 0===s?this._dispatchAssignableEnd():(this.appendChild(s),this._restoreHeldNodes(this))}}else this._restoreHeldNodes(this)}displayAttention(){this.querySelector("#attention").style.display="block"}_getNodeToInstantiate(){this.started=!0;let e=[],t=[];this.myFragmentChildren=[];for(var s=0;s<this.innerFragment.children.length;s++){var n=this.innerFragment.children[s];this.myFragmentChildren.push(n),this._isHolder(n)&&("AA-WHEN"==n.heldElement.nodeName&&this.evaluate(n.heldElement)&&e.push(n),"AA-OTHERWISE"==n.heldElement.nodeName&&t.push(n))}return 0==e.length?t:e}run(){if(this.started=!0,0!==this.myFragmentChildren.length&&!(this.fragmentChildrenCounter>=this.myFragmentChildren.length)){this.currentNode||this.formerNodes.push(this.currentNode);var e=this.myFragmentChildren[this.fragmentChildrenCounter];this.isHolder(e)?finalFragmentChild=this.replaceHolderWithElement(e):finalFragmentChild=e,this.appendChild(finalFragmentChild),this._restoreHeldNodes(finalFragmentChild),this.fragmentChildrenCounter+=1}}evaluate(element){var test=element.getAttribute("test"),testCopy=test;if(null==test||""==test)return null;try{var parseTree=Object(_lib_jsep_jsep_js__WEBPACK_IMPORTED_MODULE_3__.a)(test);if("Literal"==parseTree.left.type&&"Literal"==parseTree.right.type)return eval(test);for(var identifiers=this.getIdentifiersInParseTree(parseTree),i=0;i<identifiers.length;i++){var value=this.mem.load(identifiers[i]);"string"==typeof value&&(value=`'${value}'`);var regex=new RegExp(identifiers[i],"g");testCopy=testCopy.replace(regex,value)}var replacedTree=Object(_lib_jsep_jsep_js__WEBPACK_IMPORTED_MODULE_3__.a)(testCopy);if("Literal"==replacedTree.left.type&&"Literal"==replacedTree.right.type)return eval(testCopy)}catch(e){console.log("parse error:",e)}}getIdentifiersInParseTree(e){if(void 0!==e.type){if("BinaryExpression"==e.type){var t=this.getIdentifiersInParseTree(e.left),s=this.getIdentifiersInParseTree(e.right);let n=[];return"object"==typeof t&&(console.log(t),n.push.apply(n,t)),"object"==typeof s&&n.push.apply(n,s),n}if("Identifier"==e.type)return[e.name]}}evalParseTree(e){if(void 0!==e.type){if("BinaryExpression"==e.type){var left=this.evalParseTree(e.left),right=this.evalParseTree(e.right),result=eval(left+e.operator+right);return result}if("Literal"==e.type)return e.raw;if("Identifier"==e.type)return this.askForWidgetVariableValue(e.name)}}parseExpression(e){var t=Object(_lib_jsep_jsep_js__WEBPACK_IMPORTED_MODULE_3__.a)(e);return this.evalParseTree(t)}}customElements.get("aa-choose")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-CHOOSE"),customElements.define("aa-choose",AAChoose))},function(e,t,s){"use strict";var n=s(0);class i extends n.a{static get observedAttributes(){return["name","should-run","debug"]}constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML="<slot></slot>"}connectedCallback(){this.started||(this.started=!0,void 0!==this.innerFragment&&(this._analyzeChildNodesForElement(this.innerFragment),this.appendChild(this.innerFragment),this._restoreHeldNodes(this)))}}customElements.get("aa-when")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-WHEN"),customElements.define("aa-when",i))},function(e,t,s){"use strict";var n=s(0);class i extends n.a{constructor(){super()}connectedCallback(){this.started||(this.started=!0,void 0!==this.innerFragment&&(this._analyzeChildNodesForElement(this.innerFragment),this.appendChild(this.innerFragment),this._restoreHeldNodes(this)))}}customElements.get("aa-otherwise")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-OTHERWISE"),customElements.define("aa-otherwise",i))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,s){"use strict";s.r(t);var n=s(0);s(2);class i extends n.a{constructor(){super(),this._templateHolders=[]}get css(){return html`
            <style>
            
            </style>
        `}get html(){return html`
            <slot>
            </slot>

            <pre id="display" class="prettyprint lang-html" hidden >

            </pre>
        `}connectedCallback(){}display(){this.$.display.hidden=!1,this.$.display.innerText=this.heldElementOuterHTML}}customElements.get("aa-holder")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-HOLDER"),customElements.define("aa-holder",i));class r extends n.a{get observedAttributes(){return["name"]}constructor(){super()}connectedCallback(){}setData(e,t){this.dataset[e]=t}getData(e){return this.dataset[this.toHyphenated(e)]}}customElements.get("aa-memory")||(void 0===window.AANodeNames&&(window.AANodeNames=[]),window.AANodeNames.push("AA-MEMORY"),customElements.define("aa-memory",r));class o extends n.a{static get observedAttributes(){return["submit-button-text","submit-button-hidden","name"]}constructor(){super(),this.root=this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback(),this.submitButtonText=this._submitButtonText||"submit",this.root.innerHTML=this.css+this.html,this._started||(this._started=!0,this.submitButtonHidden&&(this.root.querySelector(".submitButtonContainer").style.display="none"),void 0!==this.innerFragment&&(this._analyzeChildNodesForElement(this.innerFragment),this.appendChild(this.innerFragment),this._restoreHeldNodes(this)),this.root.querySelector(".submitButton").addEventListener("click",this.submitButtonClick.bind(this)))}get css(){return html`
            <style>
                :host {
                    display: block;
                    height: fit-content;
                    border: solid thin;
                }

                .submitButtonContainer{
                    display:flex; 
                    justify-content: space-between; 
                    align-items:center;
                }
            
            </style>
        `}get html(){return html`
            <slot></slot>
            hey
            <div class='submitButtonContainer'>
                <div>
                    <button class='submitButton'> button: ${this.submitButtonText}</button>
                </div>
                <div id='userMessage'></div>
            </div>
        
        `}attributeChangedCallback(){}hasChildrenThatDemandResponse(){let e=this.getEmaChildren(this),t=!1;for(let s=0;s<e.length;s++){let n=e[s];n.demandsResponse&&null==n.getValue()&&(n.displayAttention&&n.displayAttention(),t=!0)}return t&&(this.userMessage.innerHTML='<div style="display:flex; align-items:center"> <div>please fill out the required fields</div> <div id="attention" style="color: red; font-size: 20px;  border: solid thin; border-radius: 50%; width: 20px;\n                                            margin-left:20px; height: 20px; \n                                            text-align: center;\n                                            padding: 5px;">!</div></div>',this.userMessage.style.color="red"),t}submitButtonClick(e){if(this.$.userMessage.innerHTML="",this.hasChildrenThatDemandResponse())return;let t=new CustomEvent("valueSubmit",{bubbles:!0,detail:{value:this.getValue()}});this.dispatchEvent(t);let s=new CustomEvent("assignableEnd",{bubbles:!0,detail:{value:this.getValue()}});this.dispatchEvent(s),void 0!==e.detail.callback&&e.detail.callback(e),0==this.dontHide&&this.hide()}getChildrenValuesOrder(e){void 0===e&&(e=this);for(var t=this.getEmaChildren(e),s=[],n=0;n<t.length;n++){var i=t[n];void 0!==this.name?s.push(this.name+"$"+i.getName()):s.push(i.getName())}}getValue(){this.attachedTimestamp,(new Date).getTime();return this.getChildrenValues(this)}getValueWithKey(){var e={};return e[this.name]=this.getValue(),e}automate(){for(var e=0;e<this.children.length;e++)this.isEmaElement(this.children[e])&&void 0!==this.children[e].automate&&this.children[e].automate();this.submitButtonClick()}hide(){this.style.display="none"}show(){this.style.display="block"}}customElements.get("aa-screen")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-SCREEN"),customElements.define("aa-screen",o));class a extends n.a{static get observedAttributes(){return["name","should-run","debug"]}constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML="<slot></slot>"}connectedCallback(){""===this.id&&console.warn(this,"has no id"),this.started=!1,this.displayAll?this.restoreHeldNodes(this):null!==this.shouldRun&&!0!==this.shouldRun||this.start()}get css(){return html`
            <style>
                :host {
                    display: block;
                }
            </style>
        `}get html(){return html`
            <slot></slot>
            <button id='nextButton' hidden></button>
        `}properties(){return{shouldRun:{type:Boolean,value:!0,reflectToAttribute:!1,reflectToConfig:!1},showNextButton:{type:Boolean,value:!1},nextKeyCode:{type:Number,value:0},prevKeyCode:{type:Number,value:0},displayAll:{type:Boolean,value:!1}}}start(){if(!this.started){if(void 0===this.innerFragment)return console.warn(".innerFragment is undefined"),void this.restoreHeldNodes(this);this._analyzeChildNodesForElement(this.innerFragment),this.started=!0,this.fragmentChildrenCounter=0,this.formerNodes=[],this.myFragmentChildren=[];for(let e=0;e<this.innerFragment.children.length;e++)this.myFragmentChildren.push(this.innerFragment.children[e]),this.innerFragment.children[e].assignableEndListener=this.assignableEndListener.bind(this);this.next(),this.nextKeyCode&&this.addEventListener("keyup",(function(e){}))}}next(){if(this.started||this.start(),0===this.myFragmentChildren.length)return;if(this.fragmentChildrenCounter>=this.myFragmentChildren.length)return null;void 0!==this.currentNode&&this.formerNodes.push(this.currentNode);let e,t=this.myFragmentChildren[this.fragmentChildrenCounter];return e=this._isHolder(t)?this._replaceHolderWithElement(t):t,void 0!==this.currentNode&&this.currentNode.removeEventListener("assignableEnd",this.currentNode.assignableEndListener),this.currentNode=e,this.currentNode.assignableEndListener=this.assignableEndListener.bind(this),this.fragmentChildrenCounter+=1,this.currentNode.addEventListener("assignableEnd",this.currentNode.assignableEndListener),this.appendChild(e),this._restoreHeldNodes(e),e}assignableEndListener(e){if(e.stopPropagation(),null===this.next()){let e=new CustomEvent("assignableEnd",{bubbles:!0});this.dispatchEvent(e)}}}customElements.get("aa-sequence")||(void 0===window.AANodeNames&&(window.AANodeNames=[]),window.AANodeNames.push("AA-SEQUENCE"),customElements.define("aa-sequence",a));class l extends n.a{static get observedAttributes(){return["name","should-run","debug"]}constructor(){super(),this.mem=document.createElement("aa-memory"),this.myTemplate=document.createElement("template"),this.myTemplate.innerHTML=this.innerHTML,this.innerHTML="",this.addEventListener("valueSubmit",e=>{let t={data:e.detail.value,sessionID:this.sessionID,sessionTimestamp:this.sessionTime,sessionName:this.name,variables:Object.keys(e.detail.value)};this.mem.saveReplyValue(e.detail.value,!1);let s=new CustomEvent("inputSubmit",{bubbles:!0,detail:{input:t}});this.dispatchEvent(s)}),this.addEventListener("assignableEnd",e=>{let t=new CustomEvent("sessionEnd",{bubbles:!0,detail:{}});this.dispatchEvent(t)})}myIdGenerator(){return 0}connectedCallback(){this.sessionID=this.myIdGenerator(),this.sessionTime=(new Date).getTime(),null!==this.shouldRun&&!0!==this.shouldRun||this.run()}getElementContent(e){if("SCRIPT"!==e.nodeName){if("#text"===e.nodeName)return e.textContent;if("#comment"===e.nodeName)return"\x3c!--"+e.textContent+"!--\x3e";if("TEMPLATE"===e.nodeName)return this.getElementContent(e.content);if("#document-fragment"===e.nodeName){let t="";for(let s=0;s<e.childNodes.length;s++)t+=this.getElementContent(e.childNodes[s]);return t}return e.outerHTML}}display(){this.display=this.querySelector("#display"),this.initialNodesList=[];for(let e=0;e<this.childNodes.length;e++)this.initialNodesList.push(this.childNodes[e]);this.sourceText="";for(let e=0;e<this.initialNodesList.length;e++){let t=this.initialNodesList[e];this.sourceText+=this.getElementContent(t)}this.display.innerHTML=hljs.highlightAuto(this.sourceText).value,this.display.addEventListener("input",e=>{}),this.$.updateButton.addEventListener("click",()=>{this.updateFromEditor()})}updateFromEditor(){let e=document.createElement("template");e.innerHTML=this.sourceText;let t=document.createElement("aa-session");t.shouldRun=!0,t.appendChild(e),this.appendChild(t)}run(){this.started=!0,this.templateHolders=[],this.holderList=[],this.nodesToAppendAfterChild=[],this.referencedItems=this.getReferencedItems(this),this._analyzeChildNodesForElement(this.myTemplate.content),this.appendChild(this.myTemplate.content),null!==this.shouldRun&&!0!==this.shouldRun||this._restoreHeldNodes(this),this.initialChildNodesList=[];for(let e=0;e<this.childNodes.length;e++)this.initialChildNodesList.push(this.childNodes[e]);for(let e=0;e<this.initialChildNodesList.length;e++){let t=this.initialChildNodesList[e];void 0!==t.nodeName&&"TEMPLATE"===t.nodeName&&(this._analyzeChildNodesForElement(t.content),this.appendChild(t.content),null!==this.shouldRun&&!0!==this.shouldRun||this._restoreHeldNodes(this))}}getReferencedItems(e){let t=[];this._isAAElement(e)&&t.push(e);for(let s=0;s<e.childNodes.length;s++){let n=e.childNodes[s];this._isAAElement(n)&&(t=t.concat(this.getReferencedItems(n)))}return t}}customElements.get("aa-session")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-SESSION"),customElements.define("aa-session",l));class d extends n.a{static get observedAttributes(){return["name","value"]}constructor(){super(),this.root=this.attachShadow({mode:"open"})}connectedCallback(){this.mem=this._getParentSession().mem,this.mem.setData(this.name,this.value)}}customElements.get("aa-variable")||(window.AANodeNames=window.AANodeNames||[],window.AANodeNames.push("AA-VARIABLE"),customElements.define("aa-variable",d))}]);